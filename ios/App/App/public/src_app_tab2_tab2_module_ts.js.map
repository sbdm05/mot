{"version":3,"file":"src_app_tab2_tab2_module_ts.js","mappings":"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","sources":["./src/app/services/users.service.ts","./src/app/tab2/tab2-routing.module.ts","./src/app/tab2/tab2.module.ts","./src/app/tab2/tab2.page.ts"],"sourcesContent":["import { HttpClient, HttpHeaders } from '@angular/common/http';\nimport { Injectable } from '@angular/core';\nimport { BehaviorSubject, Observable, Subject } from 'rxjs';\nimport { catchError, tap } from 'rxjs/operators';\nimport { environment } from 'src/environments/environment';\nimport { User } from '../user/user';\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class UsersService {\n  private urlApi = environment.urlApi;\n\n  constructor(private http: HttpClient) {}\n  // eslint-disable-next-line @typescript-eslint/member-ordering\n  //token!: number;\n  // eslint-disable-next-line @typescript-eslint/member-ordering\n  private refreshCollection$: BehaviorSubject<any> = new BehaviorSubject<any>(\n    ''\n  );\n\n  // attention sans le typage, on ne récupère pas la valeur dans le subscribe !!!!\n  onSignUp(user): Observable<any> {\n    console.log(user, 'user');\n    return this.http.post<User>(`${this.urlApi}/api/v1/letters`, user);\n  }\n\n  onLogin(user): Observable<any> {\n    // const token = localStorage.getItem('token');\n    // let headers_object = new HttpHeaders().set(\n    //   'Authorization',\n    //   'Bearer ' + token\n    // );\n    console.log(user, 'user');\n    return this.http.post<User>(`${this.urlApi}/api/v1/letters/login`, user);\n    // ).pipe(\n    //   catchError(async (err) => console.log(err))\n    // );\n    // return this.http.post<User>(\n\n    // )\n  }\n\n  // je commente cette fonction pour des tests\n  // getUser(token): Observable<any> {\n  //   const headers = new HttpHeaders()\n  //     .set('content-type', 'application/json')\n  //     .set('Access-Control-Allow-Origin', '*')\n  //     .set('Authorization', 'Bearer ' + token);\n\n  //   return this.http.get('http://localhost:4000/api/v1/letters/user', {\n  //     headers,\n  //   });\n  // }\n\n  // getUser(token) {\n  //   const headers = new HttpHeaders()\n  //     .set('content-type', 'application/json')\n  //     .set('Access-Control-Allow-Origin', '*')\n  //     .set('Authorization', 'Bearer ' + token);\n  //   this.token = token;\n  //   this.refreshCollection(token, headers);\n  //   return this.refreshCollection$;\n  // }\n\n  refreshCollection(token): Observable<any> {\n    // console.log('depuis refreshcollection');\n    const headers = new HttpHeaders()\n      .set('content-type', 'application/json')\n      .set('Access-Control-Allow-Origin', '*')\n      .set('Authorization', 'Bearer ' + token);\n\n    this.http\n      .get(`${this.urlApi}/api/v1/letters/user`, {\n        headers,\n      })\n      .subscribe((data) => {\n        this.refreshCollection$.next(data);\n        console.log(data, 'depuis refreshcollection');\n      });\n    return;\n  }\n\n  // eslint-disable-next-line @typescript-eslint/member-ordering\n  collection(token) {\n    console.log(token, 'toekn depuis collection');\n    this.refreshCollection(token);\n    return this.refreshCollection$;\n  }\n\n  // je comment cette fonction pour tester avec le behavior chaud\n  updateUser(user, token): Observable<any> {\n    return this.http.patch(`${this.urlApi}/api/v1/letters/user`, user).pipe(\n      tap(() => {\n        this.refreshCollection(token);\n      })\n    );\n  }\n\n  // refreshCollection(data): void {\n  //   console.log('depuis refreshcollection', data);\n  //   return this.refreshCollection$.next(data);\n  // }\n\n  // tentative avec refresh collection\n  // updateUser(user): Observable<any> {\n  //   return this.http\n  //     .patch('http://localhost:4000/api/v1/letters/user', user)\n  //     .pipe(\n  //       tap(() => {\n  //         this.refreshCollection(this.token);\n  //       })\n  //     );\n  // }\n\n  // saveInfos(infos): Observable<any>{\n  //   console.log(infos, 'depuis')\n  //    return this.http.patch('http://localhost:4000/api/v1/letters/create-application', infos);\n  // }\n  createApplication(user): Observable<any> {\n    console.log(user, 'depuis');\n    return this.http.patch(\n      `${this.urlApi}/api/v1/letters/create-application`,\n      user\n    );\n  }\n\n  savedApplication(user, newValue, token): Observable<any> {\n    //console.log('data depuis saved application');\n\n    const data = Object.assign({});\n    data.user = user;\n    data.newValue = newValue;\n    //console.log(data);\n    return this.http\n      .patch(`${this.urlApi}/api/v1/letters/saved-application`, data)\n      .pipe(\n        tap(() => {\n          this.refreshCollection(token);\n        })\n      );\n  }\n\n  deleteApplication(user, letter, token): Observable<any> {\n    const data = Object.assign({});\n    data.user = user;\n    data.toRemove = letter;\n    return this.http\n      .patch(`${this.urlApi}/api/v1/letters/delete-application`, data)\n      .pipe(\n        tap(() => {\n          this.refreshCollection(token);\n        })\n      );\n  }\n\n  forgotPassword(email): Observable<any> {\n    console.log(email, 'depuis service');\n    return this.http.post(`${this.urlApi}/api/v1/letters/forgot-password`, {\n      email,\n    });\n  }\n\n  resetPassword(obj): Observable<any> {\n    console.log('depuis service', obj);\n\n    return this.http.post(`${this.urlApi}/api/v1/letters/reset-password/`, obj);\n  }\n\n  saveNewPassword(obj): Observable<any> {\n    console.log(obj);\n\n    return this.http.post(\n      `${this.urlApi}/api/v1/letters/save-new-password`,\n      obj\n    );\n  }\n\n  deleteUser(user: User): Observable<User> {\n    const { _id } = user;\n    console.log(_id);\n\n    return this.http.delete<User>(`${this.urlApi}/api/v1/letters/${_id}`);\n  }\n  // deleteUser(user: User) {\n  //   console.log(user);\n  // }\n}\n","import { NgModule } from '@angular/core';\nimport { RouterModule, Routes } from '@angular/router';\nimport { Tab2Page } from './tab2.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: Tab2Page,\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule]\n})\nexport class Tab2PageRoutingModule {}\n","import { IonicModule } from '@ionic/angular';\nimport { RouterModule } from '@angular/router';\nimport { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\nimport { Tab2Page } from './tab2.page';\nimport { ExploreContainerComponentModule } from '../explore-container/explore-container.module';\n\nimport { Tab2PageRoutingModule } from './tab2-routing.module';\n\n@NgModule({\n  imports: [\n    IonicModule,\n    CommonModule,\n    FormsModule,\n    ExploreContainerComponentModule,\n    Tab2PageRoutingModule,\n    ReactiveFormsModule\n  ],\n  declarations: [Tab2Page]\n})\nexport class Tab2PageModule {}\n","import { Component, OnChanges, OnInit } from '@angular/core';\nimport { FormBuilder, FormGroup, Validators } from '@angular/forms';\nimport { Router } from '@angular/router';\nimport { ModalController } from '@ionic/angular';\nimport { CoverLetterCPage } from '../components/cover-letter-c/cover-letter-c.page';\nimport { CoverLetterSimplePage } from '../components/cover-letter-simple/cover-letter-simple.page';\nimport { CoverLetterComponent } from '../components/cover-letter/cover-letter.component';\nimport { UsersService } from '../services/users.service';\nimport { User } from '../user/user';\n\n@Component({\n  selector: 'app-tab2',\n  templateUrl: 'tab2.page.html',\n  styleUrls: ['tab2.page.scss'],\n})\nexport class Tab2Page implements OnInit, OnChanges {\n  public form!: FormGroup;\n\n  // ici ajouter vérification de l'utilisateur\n\n  public user!: User;\n  token !: any;\n\n  constructor(\n    private usersService: UsersService,\n    private fb: FormBuilder,\n    private modalCtrl: ModalController,\n    private router: Router\n  ) {\n    // souscrire à l'observable()\n    // this.usersService.refreshCollection$.subscribe((data) => {\n    //   console.log(data, 'data');\n    // });\n    // check token\n    this.token = localStorage.getItem('token');\n    //console.log(token, 'token');\n    // 1 - je vérifie l'identite du user\n    if (this.token) {\n      try {\n        //console.log('test');\n\n        // ici je commente this.usersService.getUser(token).subscribe((data) => { et je remplace avec refreshCollecton\n        this.usersService.collection(this.token).subscribe((data) => {\n          //console.log(data.user, 'data');\n          const { user } = data;\n\n          this.user = user;\n          //console.log(this.user, 'depuis tab2');\n\n          this.form = this.fb.group({\n            intitule: [\n              this.user?.letters[0]?.intitule || '',\n              Validators.required,\n            ],\n            experience: [\n              this.user?.letters[0]?.experience || '',\n              Validators.required,\n            ],\n            societe: [\n              this.user?.letters[0]?.societe || '',\n              Validators.required,\n            ],\n            contact: [\n              this.user?.letters[0]?.contact || 'Madame'\n            ],\n            adresseSociete: [\n              this.user?.letters[0]?.adresseSociete || '',\n              Validators.required,\n            ],\n            cpVille: [\n              this.user?.letters[0]?.cpVille || '',\n              Validators.required,\n            ],\n          });\n        });\n      } catch (error) {}\n    } else {\n      this.router.navigate(['/']);\n    }\n  }\n\n  ngOnInit() {}\n\n  ngOnChanges() {}\n\n  saveInfos() {\n    console.log(this.form.value);\n    // const updatedUser = { ...this.form.value, ...this.user };\n    //console.log(this.user);\n    this.user.letters[0] = this.form.value;\n\n    console.log(this.user, 'final user');\n    // call service\n    this.usersService\n      .createApplication(this.user)\n      .subscribe((data) => console.log(data));\n  }\n\n  onSaved() {\n   // console.log(this.user);\n\n    // call service\n    this.usersService\n      .savedApplication(this.user, this.form.value, this.token)\n      .subscribe((data) => {\n       // console.log(data);\n      });\n  }\n\n  async openModal() {\n    console.log(this.user);\n    const user = this.user;\n    console.log(user, 'infos');\n    // attention l'objet envoyé (ici user) doit correspondre à l'objet dans @Input()\n    const coverLetter = await this.createModal(CoverLetterComponent, {\n      user,\n    });\n    await coverLetter.present();\n  }\n\n  async openModalSimple() {\n    console.log(this.user);\n    const user = this.user;\n    console.log(user, 'infos');\n    // attention l'objet envoyé (ici user) doit correspondre à l'objet dans @Input()\n    const coverLetter = await this.createModal(CoverLetterSimplePage, {\n      user,\n    });\n    await coverLetter.present();\n  }\n\n  async openModalLetterC() {\n    console.log(this.user);\n    const user = this.user;\n    console.log(user, 'infos');\n    // attention l'objet envoyé (ici user) doit correspondre à l'objet dans @Input()\n    const coverLetter = await this.createModal(CoverLetterCPage, {\n      user,\n    });\n    await coverLetter.present();\n  }\n\n  async createModal(\n    component,\n    componentProps?,\n    cssClass?\n  ): Promise<HTMLIonModalElement> {\n    const modal = await this.modalCtrl.create({\n      component,\n      cssClass,\n      componentProps,\n      backdropDismiss: true,\n    });\n    return modal;\n  }\n}\n"],"names":["HttpClient","HttpHeaders","Injectable","BehaviorSubject","tap","environment","UsersService","constructor","http","urlApi","onSignUp","user","console","log","post","onLogin","refreshCollection","token","headers","set","get","subscribe","data","refreshCollection$","next","collection","updateUser","patch","pipe","createApplication","savedApplication","newValue","Object","assign","deleteApplication","letter","toRemove","forgotPassword","email","resetPassword","obj","saveNewPassword","deleteUser","_id","delete","providedIn","Component","FormBuilder","Validators","Router","ModalController","CoverLetterCPage","CoverLetterSimplePage","CoverLetterComponent","Tab2Page","usersService","fb","modalCtrl","router","localStorage","getItem","form","group","intitule","letters","required","experience","societe","contact","adresseSociete","cpVille","error","navigate","ngOnInit","ngOnChanges","saveInfos","value","onSaved","openModal","coverLetter","createModal","present","openModalSimple","openModalLetterC","component","componentProps","cssClass","modal","create","backdropDismiss","selector","template"],"sourceRoot":"webpack:///","x_google_ignoreList":[]}